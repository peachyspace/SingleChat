{"version":3,"file":"react-use-firebase-hook.cjs.development.js","sources":["../src/FirebaseProviderContext.ts","../src/reducer.ts","../src/FirebaseProvider.tsx","../src/useFirebase.ts"],"sourcesContent":["import { createContext } from 'react';\nimport { FirebaseProviderContextType } from './types';\n\nexport const FirebaseProviderContext = createContext<\n  FirebaseProviderContextType\n>({} as FirebaseProviderContextType);\n","import { Action, InternalState } from './types';\n\nexport const initialState: InternalState = {\n  loading: true,\n  firebase: null,\n  user: null,\n};\n\nexport const reducer = (\n  state: InternalState,\n  action: Action\n): InternalState => {\n  switch (action.type) {\n    case 'FIREBASE_LOADED':\n      return {\n        ...state,\n        firebase: action.payload,\n      };\n    case 'USER_CHANGE':\n      return {\n        ...state,\n        loading: false,\n        user: action.payload,\n      };\n    default:\n      throw new Error('Invalid action');\n  }\n};\n","import React, { useEffect, useReducer } from 'react';\nimport { FirebaseProviderContext } from './FirebaseProviderContext';\nimport { initialState, reducer } from './reducer';\nimport { FirebaseProviderProps } from './types';\nimport * as firebaseApp from 'firebase/app';\nimport 'firebase/auth';\n\nexport const FirebaseProvider = (props: FirebaseProviderProps) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  useEffect(() => {\n    // Initialize Firebase app on mount and config changes\n    const firebase = firebaseApp.initializeApp(props.config);\n    dispatch({ type: 'FIREBASE_LOADED', payload: firebase });\n  }, [props.config]);\n\n  useEffect(() => {\n    // Check if Firebase instance is valid\n    if (!state.firebase) {\n      return;\n    }\n\n    // Subscribe to user auth changes\n    const unsubscribe = firebaseApp.auth().onAuthStateChanged(user => {\n      dispatch({\n        type: 'USER_CHANGE',\n        payload: user,\n      });\n    });\n\n    // Cleanup subscription on unmount\n    return () => unsubscribe();\n  }, [state.firebase]);\n\n  // If Firebase isn't ready return null\n  if (!state.firebase) {\n    return null;\n  }\n\n  return (\n    <FirebaseProviderContext.Provider\n      value={{\n        firebase: state.firebase,\n        user: state.user,\n        loading: state.loading,\n      }}\n    >\n      {props.children}\n    </FirebaseProviderContext.Provider>\n  );\n};\n","import { useContext } from 'react';\nimport { FirebaseProviderContext } from './FirebaseProviderContext';\nimport { FirebaseProviderContextType } from './types';\n\nexport const useFirebase = (): FirebaseProviderContextType => {\n  return useContext(FirebaseProviderContext);\n};\n"],"names":["FirebaseProviderContext","createContext","initialState","loading","firebase","user","reducer","state","action","type","payload","Error","FirebaseProvider","props","useReducer","dispatch","useEffect","firebaseApp","config","unsubscribe","onAuthStateChanged","React","Provider","value","children","useFirebase","useContext"],"mappings":";;;;;;;;;;;IAGaA,uBAAuB;AAAA;AAAGC,mBAAa,CAElD,EAFkD;;;;;;;;;;;;;;;;;;;;ACD7C,IAAMC,YAAY,GAAkB;AACzCC,EAAAA,OAAO,EAAE,IADgC;AAEzCC,EAAAA,QAAQ,EAAE,IAF+B;AAGzCC,EAAAA,IAAI,EAAE;AAHmC,CAApC;AAMP,AAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU,CACrBC,KADqB,EAErBC,MAFqB;AAIrB,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,iBAAL;AACE,0BACKF,KADL;AAEEH,QAAAA,QAAQ,EAAEI,MAAM,CAACE;AAFnB;;AAIF,SAAK,aAAL;AACE,0BACKH,KADL;AAEEJ,QAAAA,OAAO,EAAE,KAFX;AAGEE,QAAAA,IAAI,EAAEG,MAAM,CAACE;AAHf;;AAKF;AACE,YAAM,IAAIC,KAAJ,CAAU,gBAAV,CAAN;AAbJ;AAeD,CAnBM;;ICDMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,KAAD;oBACJC,gBAAU,CAACR,OAAD,EAAUJ,YAAV;MAA7BK;MAAOQ;;AAEdC,EAAAA,eAAS,CAAC;AACR;AACA,QAAMZ,QAAQ,GAAGa,yBAAA,CAA0BJ,KAAK,CAACK,MAAhC,CAAjB;AACAH,IAAAA,QAAQ,CAAC;AAAEN,MAAAA,IAAI,EAAE,iBAAR;AAA2BC,MAAAA,OAAO,EAAEN;AAApC,KAAD,CAAR;AACD,GAJQ,EAIN,CAACS,KAAK,CAACK,MAAP,CAJM,CAAT;AAMAF,EAAAA,eAAS,CAAC;AACR;AACA,QAAI,CAACT,KAAK,CAACH,QAAX,EAAqB;AACnB;AACD;;;AAGD,QAAMe,WAAW,GAAGF,gBAAA,GAAmBG,kBAAnB,CAAsC,UAAAf,IAAI;AAC5DU,MAAAA,QAAQ,CAAC;AACPN,QAAAA,IAAI,EAAE,aADC;AAEPC,QAAAA,OAAO,EAAEL;AAFF,OAAD,CAAR;AAID,KALmB,CAApB;;AAQA,WAAO;AAAA,aAAMc,WAAW,EAAjB;AAAA,KAAP;AACD,GAhBQ,EAgBN,CAACZ,KAAK,CAACH,QAAP,CAhBM,CAAT;;AAmBA,MAAI,CAACG,KAAK,CAACH,QAAX,EAAqB;AACnB,WAAO,IAAP;AACD;;AAED,SACEiB,4BAAA,CAACrB,uBAAuB,CAACsB,QAAzB;AACEC,IAAAA,KAAK,EAAE;AACLnB,MAAAA,QAAQ,EAAEG,KAAK,CAACH,QADX;AAELC,MAAAA,IAAI,EAAEE,KAAK,CAACF,IAFP;AAGLF,MAAAA,OAAO,EAAEI,KAAK,CAACJ;AAHV;GADT,EAOGU,KAAK,CAACW,QAPT,CADF;AAWD,CA3CM;;ICHMC,WAAW,GAAG,SAAdA,WAAc;AACzB,SAAOC,gBAAU,CAAC1B,uBAAD,CAAjB;AACD,CAFM;;;;;;"}